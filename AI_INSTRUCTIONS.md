waw-sem is the server engine module for the waw platform that turns an ordered set of modules into a running backend by initializing Express + HTTP, optional MongoDB + session middleware, Socket.IO, and a convention-based CRUD engine through the shared `waw` context. When loaded at runtime, it sets up `waw.app`, `waw.server`, and `waw.express`, provides `waw.router(basePath)` for mounting routers, and defines common helpers including `waw.ensure(req,res,next)` and `waw.role(roles, middleware)` for authorization gating, plus lightweight helpers like `waw.next` and `waw.block`. Sem parses query parameters into `req.queryParsed`, provides a `/status` endpoint returning `true`, and optionally serves a favicon when `waw.config.icon` exists. If `waw.config.mongo` is configured, Sem builds `waw.mongoUrl`, connects Mongoose, and configures Connect-Mongo session storage; it always installs `express-session` middleware and maintains weekly-rotating session secrets persisted in the project `server.json` under `secretKeys` as `{ key, createdAt }` with up to 5 active keys. Sem initializes Socket.IO on `waw.server` and exposes `waw.socket.io`, `waw.socket.emit(to, message, room?)`, and `waw.socket.add(fn)`, and by default forwards `create`, `update`, `unique`, and `delete` socket events to other clients. Sem provides `waw.crud` with `config`, `register`, and `finalize` to generate endpoints under `/api/<crudName>` and to wire per-action hooks (required fields, ensure, query, sort/skip/limit, select, populate) onto the `waw` object using predictable naming conventions. At startup, Sem loads all module files ending with `collection.js` first and then all files ending with `api.js`, then calls `waw.crud.finalize()` and starts listening on `waw.config.port` (default `8080`). Sem also exposes a thin CLI that provides `waw add` and `waw a` for scaffolding new modules using the Sem module template.
